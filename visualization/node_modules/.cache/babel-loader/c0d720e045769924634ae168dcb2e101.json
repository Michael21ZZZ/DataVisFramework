{"ast":null,"code":"import t from \"lodash.debounce\";\nimport n, { useRef as r, useState as e, useEffect as o } from \"react\";\nimport { select as a, event as i } from \"d3-selection\";\nimport u from \"resize-observer-polyfill\";\nimport \"d3-transition\";\nimport { range as f, min as l, max as s, descending as c } from \"d3-array\";\nimport h from \"d3-cloud\";\nimport d from \"lodash.clonedeep\";\nimport m from \"seedrandom\";\nimport y from \"tippy.js\";\nimport { dispatch as p } from \"d3-dispatch\";\nimport { scaleOrdinal as x, scaleLinear as v, scaleSqrt as g, scaleLog as b } from \"d3-scale\";\nimport { schemeCategory10 as w } from \"d3-scale-chromatic\";\nfunction M() {\n  return (M = Object.assign || function (t) {\n    for (var n = 1; n < arguments.length; n++) {\n      var r = arguments[n];\n      for (var e in r) {\n        Object.prototype.hasOwnProperty.call(r, e) && (t[e] = r[e]);\n      }\n    }\n    return t;\n  }).apply(this, arguments);\n}\nvar z = Math.PI / 180;\nfunction k(t) {\n  return t.text;\n}\nfunction W() {\n  return \"serif\";\n}\nfunction S() {\n  return \"normal\";\n}\nfunction O(t) {\n  return Math.sqrt(t.value);\n}\nfunction T() {\n  return 30 * (~~(6 * Math.random()) - 3);\n}\nfunction j() {\n  return 1;\n}\nfunction A(t, n, r, e) {\n  if (!n.sprite) {\n    var o = t.context,\n      a = t.ratio;\n    o.clearRect(0, 0, 2048 / a, 2048 / a);\n    var i = 0,\n      u = 0,\n      f = 0,\n      l = r.length;\n    for (--e; ++e < l;) {\n      n = r[e], o.save(), o.font = n.style + \" \" + n.weight + \" \" + ~~((n.size + 1) / a) + \"px \" + n.font;\n      var s = o.measureText(n.text + \"m\").width * a,\n        c = n.size << 1;\n      if (n.rotate) {\n        var h = Math.sin(n.rotate * z),\n          d = Math.cos(n.rotate * z),\n          m = s * d,\n          y = s * h,\n          p = c * d,\n          x = c * h;\n        s = Math.max(Math.abs(m + x), Math.abs(m - x)) + 31 >> 5 << 5, c = ~~Math.max(Math.abs(y + p), Math.abs(y - p));\n      } else s = s + 31 >> 5 << 5;\n      if (c > f && (f = c), i + s >= 2048 && (i = 0, u += f, f = 0), u + c >= 2048) break;\n      o.translate((i + (s >> 1)) / a, (u + (c >> 1)) / a), n.rotate && o.rotate(n.rotate * z), o.fillText(n.text, 0, 0), n.padding && (o.lineWidth = 2 * n.padding, o.strokeText(n.text, 0, 0)), o.restore(), n.width = s, n.height = c, n.xoff = i, n.yoff = u, n.x1 = s >> 1, n.y1 = c >> 1, n.x0 = -n.x1, n.y0 = -n.y1, n.hasText = !0, i += s;\n    }\n    for (var v = o.getImageData(0, 0, 2048 / a, 2048 / a).data, g = []; --e >= 0;) {\n      if ((n = r[e]).hasText) {\n        for (var b = (s = n.width) >> 5, w = (c = n.y1 - n.y0, 0); w < c * b; w++) {\n          g[w] = 0;\n        }\n        if (null == (i = n.xoff)) return;\n        u = n.yoff;\n        for (var M = 0, k = -1, W = 0; W < c; W++) {\n          for (w = 0; w < s; w++) {\n            var S = v[2048 * (u + W) + (i + w) << 2] ? 1 << 31 - w % 32 : 0;\n            g[b * W + (w >> 5)] |= S, M |= S;\n          }\n          M ? k = W : (n.y0++, c--, W--, u++);\n        }\n        n.y1 = n.y0 + k, n.sprite = g.slice(0, (n.y1 - n.y0) * b);\n      }\n    }\n  }\n}\nfunction I(t, n, r) {\n  for (var e, o = t.sprite, a = t.width >> 5, i = t.x - (a << 4), u = 127 & i, f = 32 - u, l = t.y1 - t.y0, s = (t.y + t.y0) * (r >>= 5) + (i >> 5), c = 0; c < l; c++) {\n    e = 0;\n    for (var h = 0; h <= a; h++) {\n      if ((e << f | (h < a ? (e = o[c * a + h]) >>> u : 0)) & n[s + h]) return !0;\n    }\n    s += r;\n  }\n  return !1;\n}\nfunction q(t, n) {\n  var r = t[0],\n    e = t[1];\n  n.x + n.x0 < r.x && (r.x = n.x + n.x0), n.y + n.y0 < r.y && (r.y = n.y + n.y0), n.x + n.x1 > e.x && (e.x = n.x + n.x1), n.y + n.y1 > e.y && (e.y = n.y + n.y1);\n}\nfunction E(t) {\n  var n = t[0] / t[1];\n  return function (t) {\n    return [n * (t *= .1) * Math.cos(t), t * Math.sin(t)];\n  };\n}\nfunction C() {\n  return document.createElement(\"canvas\");\n}\nfunction D(t) {\n  return \"function\" == typeof t ? t : function () {\n    return t;\n  };\n}\nvar F = {\n  archimedean: E,\n  rectangular: function rectangular(t) {\n    var n = 4 * t[0] / t[1],\n      r = 0,\n      e = 0;\n    return function (t) {\n      var o = t < 0 ? -1 : 1;\n      switch (Math.sqrt(1 + 4 * o * t) - o & 3) {\n        case 0:\n          r += n;\n          break;\n        case 1:\n          e += 4;\n          break;\n        case 2:\n          r -= n;\n          break;\n        default:\n          e -= 4;\n      }\n      return [r, e];\n    };\n  }\n};\nfunction P(t, n) {\n  return t[Math.floor(n() * t.length)];\n}\nfunction L(t) {\n  return t.size + \"px\";\n}\nfunction N(t) {\n  return t.text;\n}\nfunction R(t) {\n  return \"translate(\" + t.x + \", \" + t.y + \")\" + (\"number\" == typeof t.rotate ? \"rotate(\" + t.rotate + \")\" : \"\");\n}\nfunction U(t) {\n  var n,\n    r = t.callbacks,\n    e = t.maxWords,\n    o = t.options,\n    a = t.selection,\n    u = t.size,\n    f = o.deterministic,\n    x = o.enableOptimizations,\n    w = o.fontFamily,\n    z = o.fontStyle,\n    U = o.fontSizes,\n    H = o.fontWeight,\n    B = o.padding,\n    G = o.randomSeed,\n    J = o.rotations,\n    K = o.rotationAngles,\n    Q = o.spiral,\n    V = o.scale,\n    X = t.words.concat().sort(function (t, n) {\n      return c(t.value, n.value);\n    }).slice(0, e),\n    Y = m(f ? G || \"deterministic\" : null);\n  (n = x ? function () {\n    var t = [256, 256],\n      n = k,\n      r = W,\n      e = O,\n      o = S,\n      a = S,\n      i = T,\n      u = j,\n      f = E,\n      l = [],\n      s = Infinity,\n      c = p(\"word\", \"end\"),\n      h = Math.random,\n      d = {},\n      m = C,\n      y = !1;\n    function x(n, r, e) {\n      for (var o, a, i, u, l, s = r.x, c = r.y, d = Math.sqrt(t[0] * t[0] + t[1] * t[1]), m = f(t), y = h() < .5 ? 1 : -1, p = -y; (o = m(p += y)) && (a = ~~o[0], i = ~~o[1], !(Math.min(Math.abs(a), Math.abs(i)) >= d));) {\n        if (r.x = s + a, r.y = c + i, !(r.x + r.x0 < 0 || r.y + r.y0 < 0 || r.x + r.x1 > t[0] || r.y + r.y1 > t[1] || e && I(r, n, t[0]) || e && !((u = r).x + u.x1 > (l = e)[0].x && u.x + u.x0 < l[1].x && u.y + u.y1 > l[0].y && u.y + u.y0 < l[1].y))) {\n          for (var x, v = r.sprite, g = r.width >> 5, b = t[0] >> 5, w = r.x - (g << 4), M = 127 & w, z = 32 - M, k = r.y1 - r.y0, W = (r.y + r.y0) * b + (w >> 5), S = 0; S < k; S++) {\n            x = 0;\n            for (var O = 0; O <= g; O++) {\n              n[W + O] |= x << z | (O < g ? (x = v[S * g + O]) >>> M : 0);\n            }\n            W += b;\n          }\n          return delete r.sprite, !0;\n        }\n      }\n      return !1;\n    }\n    return d.canvas = function (t) {\n      return arguments.length ? (m = D(t), d) : m;\n    }, d.start = function () {\n      var f = function (t) {\n          t.width = t.height = 1;\n          var n = Math.sqrt(t.getContext(\"2d\").getImageData(0, 0, 1, 1).data.length >> 2);\n          t.width = 2048 / n, t.height = 2048 / n;\n          var r = t.getContext(\"2d\");\n          return r.fillStyle = r.strokeStyle = \"red\", r.textAlign = \"center\", {\n            context: r,\n            ratio: n\n          };\n        }(m()),\n        s = new Uint32Array((t[0] >> 5) * t[1]),\n        p = null,\n        v = [],\n        g = l.map(function (t, f) {\n          return t.text = n.call(this, t, f), t.font = r.call(this, t, f), t.style = o.call(this, t, f), t.weight = a.call(this, t, f), t.rotate = i.call(this, t, f), t.size = ~~e.call(this, t, f), t.padding = u.call(this, t, f), t;\n        }).sort(function (t, n) {\n          return n.size - t.size;\n        });\n      return setTimeout(function () {\n        return function n(r) {\n          var e = 50 * r,\n            o = Math.min(50 * (r + 1), l.length);\n          !function (n, r) {\n            for (var e = n; e < r; e += 1) {\n              var o = g[e];\n              o.x = t[0] * (h() + .5) >> 1, o.y = t[1] * (h() + .5) >> 1, A(f, o, g, e), o.hasText && x(s, o, p) && (v.push(o), c.call(\"word\", d, o), p ? q(p, o) : p = [{\n                x: o.x + o.x0,\n                y: o.y + o.y0\n              }, {\n                x: o.x + o.x1,\n                y: o.y + o.y1\n              }], o.x -= t[0] >> 1, o.y -= t[1] >> 1);\n            }\n          }(e, o), y || (o < l.length ? setTimeout(function () {\n            return n(r + 1);\n          }, 0) : (d.stop(), c.call(\"end\", d, v, p)));\n        }(0);\n      }, 0), d;\n    }, d.revive = function () {\n      return y = !1, d;\n    }, d.stop = function () {\n      return y = !0, d;\n    }, d.timeInterval = function (t) {\n      return arguments.length ? (s = null == t ? Infinity : t, d) : s;\n    }, d.words = function (t) {\n      return arguments.length ? (l = t, d) : l;\n    }, d.size = function (n) {\n      return arguments.length ? (t = [+n[0], +n[1]], d) : t;\n    }, d.font = function (t) {\n      return arguments.length ? (r = D(t), d) : r;\n    }, d.fontStyle = function (t) {\n      return arguments.length ? (o = D(t), d) : o;\n    }, d.fontWeight = function (t) {\n      return arguments.length ? (a = D(t), d) : a;\n    }, d.rotate = function (t) {\n      return arguments.length ? (i = D(t), d) : i;\n    }, d.text = function (t) {\n      return arguments.length ? (n = D(t), d) : n;\n    }, d.spiral = function (t) {\n      return arguments.length ? (f = F[t] || t, d) : f;\n    }, d.fontSize = function (t) {\n      return arguments.length ? (e = D(t), d) : e;\n    }, d.padding = function (t) {\n      return arguments.length ? (u = D(t), d) : u;\n    }, d.random = function (t) {\n      return arguments.length ? (h = t, d) : h;\n    }, d.on = function () {\n      var t = c.on.apply(c, arguments);\n      return t === c ? d : t;\n    }, d;\n  }() : h()).size(u).padding(B).words(d(X)).rotate(function () {\n    return void 0 === J ? 30 * (~~(6 * Y()) - 3) : function (t, n, r) {\n      if (t < 1) return 0;\n      var e = [];\n      if (1 === t) e = [n[0]];else {\n        e = [].concat(n);\n        for (var o = (n[1] - n[0]) / (t - 1), a = n[0] + o; a < n[1];) {\n          e.push(a), a += o;\n        }\n      }\n      return P(e, r);\n    }(J, K, Y);\n  }).spiral(Q).random(Y).text(N).font(w).fontStyle(z).fontWeight(H), function t(e, u) {\n    void 0 === u && (u = 1), x && n.revive(), n.fontSize(function (t) {\n      return function (t, n, r) {\n        var e,\n          o = l(t, function (t) {\n            return Number(t.value);\n          }),\n          a = s(t, function (t) {\n            return Number(t.value);\n          });\n        switch (r) {\n          case \"log\":\n            e = b;\n            break;\n          case \"sqrt\":\n            e = g;\n            break;\n          case \"linear\":\n          default:\n            e = v;\n        }\n        return e().domain([o, a]).range(n);\n      }(X, e, V)(t.value);\n    }).on(\"end\", function (n) {\n      if (X.length !== n.length && u <= 10) {\n        10 === u && console.warn(\"Unable to layout \" + (X.length - n.length) + \" word(s) after \" + u + \" attempts.  Consider: (1) Increasing the container/component size. (2) Lowering the max font size. (3) Limiting the rotation angles.\");\n        var f = Math.max(.95 * e[0], 1);\n        t([f, Math.max(.95 * e[1], f)], u + 1);\n      } else !function (t) {\n        var n,\n          r = t.callbacks,\n          e = t.options,\n          o = t.random,\n          a = t.words,\n          u = r.getWordColor,\n          f = r.getWordTooltip,\n          l = r.onWordClick,\n          s = r.onWordMouseOver,\n          c = r.onWordMouseOut,\n          h = e.colors,\n          d = e.enableTooltip,\n          m = e.fontStyle,\n          p = e.fontWeight,\n          x = e.textAttributes,\n          v = e.tooltipOptions,\n          g = e.fontFamily,\n          b = e.transitionDuration;\n        function w(t) {\n          return u ? u(t) : P(h, o);\n        }\n        t.selection.selectAll(\"text\").data(a).join(function (t) {\n          var r = t.append(\"text\").on(\"click\", function (t) {\n            l && l(t, i);\n          }).on(\"mouseover\", function (t) {\n            d && (n = y(i.target, M({\n              animation: \"scale\",\n              arrow: !0,\n              content: function content() {\n                return f(t);\n              }\n            }, v))), s && s(t, i);\n          }).on(\"mouseout\", function (t) {\n            n && n.destroy(), c && c(t, i);\n          }).attr(\"cursor\", l ? \"pointer\" : \"default\").attr(\"fill\", w).attr(\"font-family\", g).attr(\"font-style\", m).attr(\"font-weight\", p).attr(\"text-anchor\", \"middle\").attr(\"transform\", \"translate(0, 0) rotate(0)\");\n          \"object\" == typeof x && Object.keys(x).forEach(function (t) {\n            r = r.attr(t, x[t]);\n          }), r = r.call(function (t) {\n            return t.transition().duration(b).attr(\"font-size\", L).attr(\"transform\", R).text(N);\n          });\n        }, function (t) {\n          t.transition().duration(b).attr(\"fill\", w).attr(\"font-family\", g).attr(\"font-size\", L).attr(\"transform\", R).text(N);\n        }, function (t) {\n          t.transition().duration(b).attr(\"fill-opacity\", 0).remove();\n        });\n      }({\n        callbacks: r,\n        options: o,\n        random: Y,\n        selection: a,\n        words: n\n      });\n    }).start();\n  }(U);\n}\nvar H = {\n    getWordTooltip: function getWordTooltip(t) {\n      return t.text + \" (\" + t.value + \")\";\n    }\n  },\n  B = {\n    colors: f(20).map(function (t) {\n      return t.toString();\n    }).map(x(w)),\n    deterministic: !1,\n    enableOptimizations: !1,\n    enableTooltip: !0,\n    fontFamily: \"times new roman\",\n    fontSizes: [4, 32],\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    padding: 1,\n    rotationAngles: [-90, 90],\n    scale: \"sqrt\",\n    spiral: \"rectangular\",\n    tooltipOptions: {},\n    transitionDuration: 600\n  };\nfunction G(i) {\n  var f = i.callbacks,\n    l = i.maxWords,\n    s = void 0 === l ? 100 : l,\n    c = i.minSize,\n    h = i.options,\n    d = i.size,\n    m = i.words,\n    y = function (t, n) {\n      if (null == t) return {};\n      var r,\n        e,\n        o = {},\n        a = Object.keys(t);\n      for (e = 0; e < a.length; e++) {\n        n.indexOf(r = a[e]) >= 0 || (o[r] = t[r]);\n      }\n      return o;\n    }(i, [\"callbacks\", \"maxWords\", \"minSize\", \"options\", \"size\", \"words\"]),\n    p = M({}, H, f),\n    x = M({}, B, h),\n    v = function (t, n, i) {\n      var f = r(),\n        l = e(n),\n        s = l[0],\n        c = l[1],\n        h = e(null),\n        d = h[0],\n        m = h[1];\n      return o(function () {\n        var r = f.current,\n          e = a(r).append(\"svg\").style(\"display\", \"block\");\n        \"object\" == typeof i && Object.keys(i).forEach(function (t) {\n          e = e.attr(t, i[t]);\n        });\n        var o = e.append(\"g\");\n        function l(t, n) {\n          e.attr(\"height\", n).attr(\"width\", t), o.attr(\"transform\", \"translate(\" + t / 2 + \", \" + n / 2 + \")\"), c([t, n]);\n        }\n        m(o);\n        var s = 0,\n          h = 0;\n        void 0 === n ? (s = r.parentElement.offsetWidth, h = r.parentElement.offsetHeight) : (s = n[0], h = n[1]), l(s = Math.max(s, t[0]), h = Math.max(h, t[1]));\n        var d = new u(function (t) {\n          if (t && 0 !== t.length && void 0 === n) {\n            var r = t[0].contentRect;\n            l(r.width, r.height);\n          }\n        });\n        return d.observe(r), function () {\n          d.unobserve(r), a(r).selectAll(\"*\").remove();\n        };\n      }, [n, t, i]), [f, d, s];\n    }(c, d, h.svgAttributes),\n    g = v[0],\n    b = v[1],\n    w = v[2],\n    z = r(t(U, 100));\n  return o(function () {\n    b && z.current({\n      callbacks: p,\n      maxWords: s,\n      options: x,\n      selection: b,\n      size: w,\n      words: m\n    });\n  }, [s, p, x, b, w, m]), n.createElement(\"div\", M({\n    ref: g,\n    style: {\n      height: \"100%\",\n      width: \"100%\"\n    }\n  }, y));\n}\nG.defaultProps = {\n  callbacks: H,\n  maxWords: 100,\n  minSize: [300, 300],\n  options: B\n};\nexport default G;\nexport { H as defaultCallbacks, B as defaultOptions };","map":null,"metadata":{},"sourceType":"module"}