{"ast":null,"code":"import _classCallCheck from \"/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/src/pages/PersonalPage.tsx\";\nimport './PersonalPage.css';\nimport React from 'react';\nimport { Link } from 'react-scroll';\nimport PersonalPageFramework from '../framework/PersonalPageFramework';\nimport plugins from '../pluginloader';\nimport $ from 'jquery';\nvar PersonalPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(PersonalPage, _React$Component);\n  function PersonalPage(props) {\n    var _this;\n    _classCallCheck(this, PersonalPage);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PersonalPage).call(this, props));\n    _this.renderNavBar = function () {\n      var navbar = [];\n      Object.keys(plugins).forEach(function (plugin) {\n        navbar.push( /*#__PURE__*/React.createElement(Link, {\n          className: \"navbar-button\",\n          activeClass: \"active\",\n          smooth: true,\n          spy: true,\n          to: \"\".concat(plugin),\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 17\n          }\n        }, plugin));\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"navbar\",\n        id: \"navbar\",\n        __self: _assertThisInitialized(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }\n      }, navbar);\n    };\n    _this.setActivePlugin = function (plugin) {\n      _this.setState({\n        activePlugin: plugin\n      });\n    };\n    _this.isScrolledIntoView = function (elem) {\n      if ($(elem).length == 0) {\n        console.log(111);\n        return false;\n      }\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n      var elemTop = $(elem).offset().top;\n      return docViewBottom >= elemTop;\n    };\n    _this.isScrolledOutOfView = function (elem) {\n      if ($(elem).length == 0) {\n        return false;\n      }\n      var docViewTop = $(window).scrollTop();\n      var docViewBottom = docViewTop + $(window).height();\n      var elemTop = $(elem).offset().top;\n      var elemBottom = elemTop + $(elem).height();\n      return docViewBottom > elemBottom + 200;\n    };\n    _this.handleScroll = function () {\n      console.log(Object.keys(plugins));\n      for (var i = 0; i < Object.keys(plugins).length; i++) {\n        var pluginName = Object.keys(plugins)[i];\n        var pluginId = \"#\".concat(pluginName);\n        if (_this.isScrolledIntoView(pluginId) && !_this.isScrolledOutOfView(pluginId)) {\n          _this.setActivePlugin(pluginName);\n          break;\n        }\n      }\n    };\n    _this.renderPlugins = function () {\n      var pluginSections = [];\n      var resume = _this.props.location.state.resume;\n      Object.keys(plugins).forEach(function (pluginName) {\n        pluginSections.push( /*#__PURE__*/React.createElement(\"div\", {\n          id: \"\".concat(pluginName),\n          className: \"plugin-section\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(PersonalPageFramework, {\n          resume: resume,\n          plugin: plugins[pluginName],\n          active: _this.state.activePlugin == pluginName,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }\n        })));\n      });\n      return pluginSections;\n    };\n    _this.state = {\n      activePlugin: null\n    };\n    return _this;\n  }\n  _createClass(PersonalPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $(window).scrollTop(0);\n      this.setState({\n        activePlugin: Object.keys(plugins)[0]\n      });\n      window.onscroll = this.handleScroll;\n    }\n    /**\n     * Render navigation bar.\n     * @returns navigation bar\n     */\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"PersonalPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      }, this.renderNavBar(), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"plugins-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }\n      }, this.renderPlugins()));\n    }\n  }]);\n  return PersonalPage;\n}(React.Component);\nexport default PersonalPage;","map":{"version":3,"names":["React","Link","PersonalPageFramework","plugins","$","PersonalPage","props","renderNavBar","navbar","Object","keys","forEach","plugin","push","setActivePlugin","setState","activePlugin","isScrolledIntoView","elem","length","console","log","docViewTop","window","scrollTop","docViewBottom","height","elemTop","offset","top","isScrolledOutOfView","elemBottom","handleScroll","i","pluginName","pluginId","renderPlugins","pluginSections","resume","location","state","onscroll","Component"],"sources":["/Users/ZHANGRY/Codes/17514/hw6-analytics-framework-tp-link/visualization/src/pages/PersonalPage.tsx"],"sourcesContent":["import './PersonalPage.css'\nimport React from 'react';\nimport { Link } from 'react-scroll';\nimport PersonalPageFramework from '../framework/PersonalPageFramework';\nimport PersonalPagePlugin from '../framework/PersonalPagePlugin'\nimport plugins from '../pluginloader'\nimport $ from 'jquery';\nimport Resume from '../framework/Resume';\n\n\ninterface Props {\n    location: any\n}\n\ninterface State {\n    activePlugin: string | null\n}\n\nclass PersonalPage extends React.Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            activePlugin: null\n        }\n    }\n\n    componentDidMount(): void {\n        $(window).scrollTop(0);\n        this.setState({\n            activePlugin: Object.keys(plugins)[0]\n        });\n        window.onscroll = this.handleScroll;\n    }\n\n    /**\n     * Render navigation bar.\n     * @returns navigation bar\n     */\n    renderNavBar =()=> {\n        const navbar: JSX.Element[] = [];\n        Object.keys(plugins).forEach(plugin => {\n            navbar.push(\n                <Link className=\"navbar-button\" activeClass=\"active\" smooth spy to={`${plugin}`} >\n                    {plugin}\n                </Link>\n            )\n        });\n        return (\n            <div className=\"navbar\" id=\"navbar\">\n                {navbar}\n            </div>\n        )\n    }\n\n    setActivePlugin =(plugin: string)=> {\n        this.setState({\n            activePlugin: plugin\n        });\n    }\n\n    isScrolledIntoView =(elem: string)=> {\n        if ($(elem).length == 0) {\n            console.log(111);\n            return false;\n        }\n        var docViewTop = $(window).scrollTop();\n        var docViewBottom = docViewTop + $(window).height();\n    \n        var elemTop = $(elem).offset().top;\n        return (docViewBottom >= elemTop);\n    }\n\n    isScrolledOutOfView =(elem: string)=> {\n        if ($(elem).length == 0) {\n            return false;\n        }\n        var docViewTop = $(window).scrollTop();\n        var docViewBottom = docViewTop + $(window).height();\n\n        var elemTop = $(elem).offset().top;\n        var elemBottom = elemTop + $(elem).height();\n        return (docViewBottom > elemBottom + 200);\n    }\n    \n    handleScroll=()=> {\n        console.log(Object.keys(plugins))\n        for (let i = 0; i < Object.keys(plugins).length; i++) {\n            const pluginName: string = Object.keys(plugins)[i];\n            const pluginId = `#${pluginName}`\n            if (this.isScrolledIntoView(pluginId) && !this.isScrolledOutOfView(pluginId)) {\n                this.setActivePlugin(pluginName);\n                break;\n            }\n        }\n    }\n\n    /**\n     * Render plugin sections.\n     */\n    renderPlugins =()=> {\n        const pluginSections: JSX.Element[] = [];\n        const resume: Resume = this.props.location.state.resume;\n        Object.keys(plugins).forEach(pluginName => {\n            pluginSections.push(\n                <div id={`${pluginName}`} className=\"plugin-section\">\n                    <PersonalPageFramework resume={resume} plugin={plugins[pluginName]} active={this.state.activePlugin==pluginName}></PersonalPageFramework>\n                </div>\n            );\n        });\n        return pluginSections;\n    }\n\n    render(): React.ReactNode {\n        return (\n            <div className=\"PersonalPage\">\n                { this.renderNavBar() }\n                <div id='plugins-container'>\n                    { this.renderPlugins() }\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default PersonalPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}